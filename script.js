document.querySelectorAll(".menu a").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href").substring(1),l=document.getElementById(t);l&&l.scrollIntoView({behavior:"smooth"})})});const burger=document.getElementById("burger"),menu=document.getElementById("menu");burger.addEventListener("click",()=>{burger.classList.toggle("active"),menu.classList.toggle("show")});const scrollBtn=document.getElementById("scrollToTop");window.addEventListener("scroll",()=>{window.scrollY>300?scrollBtn.style.display="block":scrollBtn.style.display="none"}),scrollBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("#myForm");function t(e,t){let l=document.createElement("div");if(l.className="error-message",l.innerText=t,"checkbox"===e.type){let r=e.closest(".wrapper-checkbox");r?r.insertAdjacentElement("afterend",l):e.insertAdjacentElement("afterend",l)}else e.tagName.toLowerCase(),e.classList.add("error"),e.insertAdjacentElement("afterend",l)}e.addEventListener("submit",function(l){let r=document.querySelector(".form-error-message"),n=document.querySelector(".form-success-message");l.preventDefault(),r.style.display="none",n.style.display="none",e.querySelectorAll(".error-message").forEach(e=>e.remove()),e.querySelectorAll(".input, select, .checkbox").forEach(e=>{e.classList.remove("error")});let o=!0,s=e.querySelector('input[name="name"]');s.value.trim()||(t(s,"* Введите имя"),o=!1);let a=e.querySelector('input[name="phone"]');iti.isValidNumber()||(t(a,"* Введите корректный номер"),o=!1);let c=e.querySelector('input[name="class"]'),i=parseInt(c.value.trim());(isNaN(i)||i<5||i>11)&&(t(c,"* Введите класс от 5 до 11"),o=!1);let u=e.querySelector('select[name="object"]');"start-obj"===u.value&&(t(u,"* Выберите предмет"),o=!1);let d=e.querySelector('select[name="course"]');"start-course"===d.value&&(t(d,"* Выберите направление"),o=!1);let y=e.querySelector('input[name="privacy"]');y.checked||(t(y,"* Необходимо согласиться"),o=!1),o?(n.style.display="block",setTimeout(()=>{n.style.display="none"},1e4)):(r.style.display="block",setTimeout(()=>{r.style.display="none"},1e4))})}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("myForm"),t=document.querySelector(".form-success-message"),l=document.querySelector(".form-error-message"),r=document.getElementById("phone"),n=window.intlTelInput(r,{preferredCountries:["ru","kz","by"],initialCountry:"auto",separateDialCode:!1,geoIpLookup:function(e){e("ru")},utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",nationalMode:!1});e.addEventListener("submit",function(r){r.preventDefault();let o=document.querySelector('input[name="name"]').value,s=document.querySelector('input[name="role"]:checked').value,a="+"+n.getSelectedCountryData().dialCode,c=n.getNumber(),i=document.querySelector('input[name="class"]').value,u=document.querySelector('select[name="object"]').value,d=document.querySelector('select[name="course"]').value,y=document.querySelector('input[name="addit"]').value,m=null!==document.querySelector('input[name="privacy"]:checked');if(!o||!c||!i||"start-obj"===u||"start-course"===d||!m){l.style.display="block",t.style.display="none";return}let p=`
      Новый запрос:
      Имя: ${o}
      Роль: ${s}
      Код страны: ${a}
      Номер телефона: ${c}
      Класс: ${i}
      Предмет: ${u}
      Направление подготовки: ${d}
      Доп. информация: ${y}
    `;(function r(o){fetch("https://eozpmhfbm02oqr7.m.pipedream.net",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})}).then(e=>(console.log("RAW response:",e),e.text())).then(r=>{console.log("Ответ от Pipedream/Telegram:",r),t.style.display="block",l.style.display="none",e.reset(),void 0!==n&&n.setNumber("")}).catch(e=>{console.error("Ошибка:",e),alert("Что-то пошло не так. Пожалуйста, проверьте настройки."),l.style.display="block",t.style.display="none"})})(p)})});
